// FanTribe Feed Layout - Three-Section Responsive Grid
// Desktop: Left sidebar (240px) | Feed (flex) | Right sidebar (300px)
// Tablet: Left sidebar (220px) | Feed (flex)
// Mobile: Single column with horizontal tribe chips

body.fantribe-theme {
  // Set consistent background across the entire page
  background-color: var(--ft-bg) !important;

  // Hide Discourse's default sidebar
  .sidebar-wrapper {
    display: none !important;
  }

  // Override Discourse core max-width and remove any white/pinkish backgrounds
  #main-outlet-wrapper,
  #main-outlet,
  .wrap {
    max-width: 100% !important;
    box-sizing: border-box;
    background: transparent !important;
  }

  // Adjust main outlet layout when sidebar is hidden
  #main-outlet-wrapper {
    display: block;
    overflow: visible;
    background: transparent !important;

    &.wrap {
      grid-template-columns: 1fr;
      grid-template-areas: "main";
      background: transparent !important;
    }
  }

  // Hide default list controls (we use our own filtering)
  .list-controls {
    display: none;
  }

  // Hide welcome banner
  .welcome-banner {
    display: none !important;
  }

  // List container adjustments
  .list-container {
    max-width: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
    box-sizing: border-box;

    .row.full-width {
      margin: 0;
      padding: 0;
    }
  }

  // Ensure topic list takes full width
  .topic-list,
  #list-area {
    width: 100%;
    max-width: 100%;
  }

  // Mobile: full width like menu — remove left/right padding from main wrap and list container
  @media (max-width: 767px) {
    .wrap {
      padding-left: 0 !important;
      padding-right: 0 !important;
    }

    .container.list-container {
      padding-left: 0 !important;
      padding-right: 0 !important;
      padding-inline: 0 !important;
    }
  }
}

// Main feed layout wrapper - Figma-style grid: lg:col-span-3 | lg:col-span-6 | lg:col-span-3
.fantribe-feed-layout {
  max-width: 1400px;
  margin: 0 auto;
  padding: var(--ft-space-4) var(--ft-space-4); // gap-3 md:gap-6 equivalent vertical; modest horizontal
  min-height: calc(100vh - 80px);
  box-sizing: border-box;
  background: var(--ft-bg, #f5f5f5);

  // Desktop lg: 12-col grid → 3 + 6 + 3 (25% + 50% + 25%)
  display: grid;
  grid-template-columns: 1fr 2fr 1fr; // 3 : 6 : 3
  gap: var(--ft-space-4) var(--ft-space-6);

  &__left-sidebar {
    position: sticky;
    top: 72px;
    align-self: start;
    min-width: 0;
    max-height: calc(100vh - 80px);
    overflow-y: auto;
    padding: 0 0 var(--ft-space-4); // no top padding so card aligns with middle column
    box-sizing: border-box;
    background: transparent;

    scrollbar-width: thin;
    scrollbar-color: var(--ft-gray-300) transparent;

    &::-webkit-scrollbar {
      width: 4px;
    }

    &::-webkit-scrollbar-track {
      background: transparent;
    }

    &::-webkit-scrollbar-thumb {
      background: var(--ft-gray-300);
      border-radius: var(--ft-radius-full);
    }
  }

  // Main content area - Feed
  &__content {
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: var(--ft-space-2);
    padding: 0;
    box-sizing: border-box;
    background: transparent;

    @media (min-width: 768px) {
      gap: var(--ft-space-4);
    }
  }

  // Right sidebar - Trending Topics (lg:col-span-3), sticky when middle scrolls
  &__right-sidebar {
    position: sticky;
    top: 72px;
    align-self: start;
    min-width: 0;
    max-height: calc(100vh - 80px);
    overflow-y: auto;
    padding: 0 0 var(--ft-space-4); // no top padding so card aligns with middle column
    box-sizing: border-box;
    background: transparent;

    scrollbar-width: thin;
    scrollbar-color: var(--ft-gray-300) transparent;

    &::-webkit-scrollbar {
      width: 4px;
    }

    &::-webkit-scrollbar-track {
      background: transparent;
    }

    &::-webkit-scrollbar-thumb {
      background: var(--ft-gray-300);
      border-radius: var(--ft-radius-full);
    }
  }

  // Mobile tribe chips (hidden on desktop)
  &__mobile-chips {
    display: none;
  }
}


// Tablet: 2 columns - left sidebar + main feed (right sidebar hidden), same container padding
@media (max-width: 1023px) {
  .fantribe-feed-layout {
    grid-template-columns: 1fr 2fr; // ~33% + ~67%

    &__right-sidebar {
      display: none;
    }
  }
}

// Mobile: Single column with tribe chips (<768px), chips touch menu (no top space)
@media (max-width: 767px) {
  .fantribe-feed-layout {
    display: flex;
    flex-direction: column;
    padding: 0 0 var(--ft-space-3); // no top padding so mobile chips touch header
    min-height: auto;
    max-width: 100%;

    &__mobile-chips {
      display: block;
      // position: sticky;
      top: var(--header-offset, 60px);
      z-index: 10;
      background: var(--ft-white);
      border-bottom: 1px solid var(--ft-gray-200);
      padding: var(--ft-space-2) var(--ft-space-3);
      margin: 0;
    }

    &__left-sidebar {
      display: none;
    }

    &__content {
      width: 100%;
      max-width: 100%;
      padding: 0;
      gap: var(--ft-space-3);
    }

    &__right-sidebar {
      display: none;
    }
  }
}
